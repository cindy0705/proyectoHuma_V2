var BtnnewScene=pc.createScript("btnnewScene");BtnnewScene.attributes.add("sceneId",{type:"string",default:"0",title:"Scene ID to Load"}),BtnnewScene.prototype.initialize=function(){this.entity.element.on("mouseenter",this.onEnter,this),this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("mouseup",this.onRelease,this),this.entity.element.on("mouseleave",this.onLeave,this),this.entity.element.on("touchstart",this.onPress,this),this.entity.element.on("touchend",this.onRelease,this)},BtnnewScene.prototype.onPress=function(e){this.app.root.findByName("Root").destroy(),this.loadScene(this.sceneId,(function(){}))},BtnnewScene.prototype.update=function(e){},BtnnewScene.prototype.loadScene=function(e,t){var n=e+".json";this.app.loadSceneHierarchy(n,(function(e,n){e?console.error(e):t(n)}))};var FirstPersonMovement=pc.createScript("firstPersonMovement");FirstPersonMovement.attributes.add("camera",{type:"entity",description:"Optional, assign a camera entity, otherwise one is created"}),FirstPersonMovement.attributes.add("power",{type:"number",default:8,description:"Adjusts the speed of player movement"}),FirstPersonMovement.attributes.add("lookSpeed",{type:"number",default:.05,description:"Adjusts the sensitivity of looking"}),FirstPersonMovement.prototype.initialize=function(){this.force=new pc.Vec3,this.eulers=new pc.Vec3;var e=this.app;e.mouse.on("mousemove",this._onMouseMove,this),e.mouse.on("mousedown",(function(){e.mouse.enablePointerLock()}),this),this.entity.collision||console.error("First Person Movement script needs to have a 'collision' component"),this.entity.rigidbody&&this.entity.rigidbody.type===pc.BODYTYPE_DYNAMIC||console.error("First Person Movement script needs to have a DYNAMIC 'rigidbody' component")},FirstPersonMovement.prototype.update=function(e){this.camera||this._createCamera();var t=this.force,s=this.app,o=this.camera.forward,r=this.camera.right,i=0,n=0;(s.keyboard.isPressed(pc.KEY_A)||s.keyboard.isPressed(pc.KEY_Q))&&(i-=r.x,n-=r.z),s.keyboard.isPressed(pc.KEY_D)&&(i+=r.x,n+=r.z),s.keyboard.isPressed(pc.KEY_W)&&(i+=o.x,n+=o.z),s.keyboard.isPressed(pc.KEY_S)&&(i-=o.x,n-=o.z),(s.keyboard.isPressed(pc.KEY_LEFT)||s.keyboard.isPressed(pc.KEY_Q))&&(i-=r.x,n-=r.z),s.keyboard.isPressed(pc.KEY_RIGHT)&&(i+=r.x,n+=r.z),s.keyboard.isPressed(pc.KEY_UP)&&(i+=o.x,n+=o.z),s.keyboard.isPressed(pc.KEY_DOWN)&&(i-=o.x,n-=o.z),0!==i&&0!==n&&(t.set(i,0,n).normalize().scale(this.power),this.entity.rigidbody.applyForce(t)),this.camera.setLocalEulerAngles(this.eulers.y,this.eulers.x,0)},FirstPersonMovement.prototype._onMouseMove=function(e){(pc.Mouse.isPointerLocked()||e.buttons[0])&&(this.eulers.x-=this.lookSpeed*e.dx,this.eulers.y-=this.lookSpeed*e.dy)},FirstPersonMovement.prototype._createCamera=function(){this.camera=new pc.Entity,this.camera.setName("First Person Camera"),this.camera.addComponent("camera"),this.entity.addChild(this.camera),this.camera.translateLocal(0,.5,0)};var Playsound=pc.createScript("playsound"),playing=!1;Playsound.prototype.initialize=function(){var e=this.app,resumeContext=function(){e.systems.sound.manager.context.resume(),window.removeEventListener("mousedown",resumeContext),window.removeEventListener("touchend",resumeContext)};window.addEventListener("mousedown",resumeContext),window.addEventListener("touchend",resumeContext)},Playsound.prototype.update=function(e){!0===playing&this.app.keyboard.wasPressed(pc.KEY_P)?(this.entity.sound.play("song"),playing=!1):!1===playing&this.app.keyboard.wasPressed(pc.KEY_P)||!1===playing&this.app.keyboard.wasPressed(pc.KEY_SPACE)?(this.entity.sound.pause("song"),playing=!0):!0===playing&this.app.keyboard.wasPressed(pc.KEY_SPACE)&&(this.entity.sound.play("song"),playing=!1)};var Videotexture=pc.createScript("videotexture");Videotexture.attributes.add("materials",{type:"asset",assetType:"material",array:!0}),Videotexture.attributes.add("videoAsset",{type:"asset",assetType:"audio"}),Videotexture.prototype.initialize=function(){var e=this.app,t=new pc.Texture(e.graphicsDevice,{format:pc.PIXELFORMAT_R5_G6_B5,autoMipmap:!1});t.minFilter=pc.FILTER_LINEAR,t.magFilter=pc.FILTER_LINEAR,t.addressU=pc.ADDRESS_CLAMP_TO_EDGE,t.addressV=pc.ADDRESS_CLAMP_TO_EDGE;var a=document.createElement("video");a.addEventListener("canplay",(function(e){t.setSource(a)})),a.src=this.videoAsset.getFileUrl(),a.crossOrigin="anonymous",a.loop=!1;for(var i=0;i<this.materials.length;i++){var s=this.materials[i].resource;s.emissiveMap=t,s.update()}this.videoTexture=t,this.app.keyboard.on(pc.EVENT_KEYUP,(function(e){console.log("hola"),e.key===pc.KEY_SPACE&&(!0===a.paused?a.play():a.pause())}))},Videotexture.prototype.update=function(e){this.upload=!this.upload,this.upload&&this.videoTexture.upload()};var CampanilleroTrigger=pc.createScript("campanilleroTrigger");CampanilleroTrigger.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},CampanilleroTrigger.prototype.update=function(i){},CampanilleroTrigger.prototype.quandoEntrar=function(i){"Plane"!==i.name&&(console.log(i.name+" entrou "),Campanillero=pc.app.root.findByName("Campanillero"),Campanillero.animation.play("reverencia.glb"))},CampanilleroTrigger.prototype.quandoSair=function(i){console.log(i.name+" Saiu ")};var TriggerAyaHuma=pc.createScript("triggerAyaHuma");TriggerAyaHuma.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerAyaHuma.prototype.update=function(a){},TriggerAyaHuma.prototype.quandoEntrar=function(a){"Plane"!==a.name&&(console.log(a.name+" entrou "),Ayahuma=pc.app.root.findByName("Ayahuma"),Ayahuma.animation.play("saludo.glb"))},TriggerAyaHuma.prototype.quandoSair=function(a){console.log(a.name+" Saiu ")};var TriggerCoplero=pc.createScript("triggerCoplero");TriggerCoplero.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerCoplero.prototype.update=function(o){},TriggerCoplero.prototype.quandoEntrar=function(o){"Plane"!==o.name&&(console.log(o.name+" entrou "),Coplero=pc.app.root.findByName("Coplero"),Coplero.animation.play("hola.glb"))},TriggerCoplero.prototype.quandoSair=function(o){console.log(o.name+" Saiu ")};var TriggerChinuca=pc.createScript("triggerChinuca");TriggerChinuca.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerChinuca.prototype.update=function(i){},TriggerChinuca.prototype.quandoEntrar=function(i){"Plane"!==i.name&&(console.log(i.name+" entrou "),Chinuca=pc.app.root.findByName("Chinuca"),Chinuca.animation.play("Baile.glb"))},TriggerChinuca.prototype.quandoSair=function(i){console.log(i.name+" Saiu ")};var TriggerHuarmi=pc.createScript("triggerHuarmi");TriggerHuarmi.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerHuarmi.prototype.update=function(i){},TriggerHuarmi.prototype.quandoEntrar=function(i){"Plane"!==i.name&&(console.log(i.name+" entrou "),Huarmi=pc.app.root.findByName("Huarmi"),Huarmi.animation.play("giro.glb"))},TriggerHuarmi.prototype.quandoSair=function(i){console.log(i.name+" Saiu ")};var TriggerTaquidor=pc.createScript("triggerTaquidor");TriggerTaquidor.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerTaquidor.prototype.update=function(i){},TriggerTaquidor.prototype.quandoEntrar=function(i){"Plane"!==i.name&&(console.log(i.name+" entrou "),Taquidor=pc.app.root.findByName("Taquidor"),Taquidor.animation.play("cool.glb"))},TriggerTaquidor.prototype.quandoSair=function(i){console.log(i.name+" Saiu ")};var TriggerGuitarrero=pc.createScript("triggerGuitarrero");TriggerGuitarrero.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerGuitarrero.prototype.update=function(r){},TriggerGuitarrero.prototype.quandoEntrar=function(r){"Plane"!==r.name&&(console.log(r.name+" entrou "),Guitarrero=pc.app.root.findByName("Guitarrero"),Guitarrero.animation.play("guitarra.glb"))},TriggerGuitarrero.prototype.quandoSair=function(r){console.log(r.name+" Saiu ")};var TriggerAruchico=pc.createScript("triggerAruchico");TriggerAruchico.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerAruchico.prototype.update=function(i){},TriggerAruchico.prototype.quandoEntrar=function(i){"Plane"!==i.name&&(console.log(i.name+" entrou "),Aruchico=pc.app.root.findByName("Aruchico"),Aruchico.animation.play("mirar.glb"))},TriggerAruchico.prototype.quandoSair=function(i){console.log(i.name+" Saiu ")};var TriggerPayaso=pc.createScript("triggerPayaso");TriggerPayaso.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.quandoEntrar,this),this.entity.collision.on("triggerleave",this.quandoSair,this)},TriggerPayaso.prototype.update=function(a){},TriggerPayaso.prototype.quandoEntrar=function(a){"Plane"!==a.name&&(console.log(a.name+" entrou "),Payaso=pc.app.root.findByName("Payaso"),Payaso.animation.play("payasobaile.glb"),setTimeout((function(){Payaso.animation.enabled=!0}),1e3))},TriggerPayaso.prototype.quandoSair=function(a){console.log(a.name+" Saiu ")};var Triggertext=pc.createScript("triggertext");Triggertext.attributes.add("artistname",{type:"string"}),Triggertext.prototype.initialize=function(){this.artistname;this.entity.collision.on("collisionstart",this.onCollisionStart,this),this.entity.collision.on("collisionend",this.onCollisionEnd,this)},Triggertext.prototype.onCollisionStart=function(t){t.other.rigidbody&&(this.app.root.findByName("artworkUI").element.text=this.artistname)},Triggertext.prototype.onCollisionEnd=function(t){this.app.root.findByName("artworkUI").element.text=""},Triggertext.prototype.update=function(t){};